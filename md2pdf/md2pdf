#!/usr/bin/env/python3
import sys
import markdown
from weasyprint import HTML

def md_to_pdf(md_file, pdf_file):
    # Read markdown
    with open(md_file, 'r', encoding='utf-8') as f:
        md_content = f.read()
    
    # Convert to HTML
    html_content = markdown.markdown(md_content)
    
    # Wrap in basic HTML structure with CSS
    full_html = f"""
    <!DOCTYPE html>
    <html>
    <head>
        <meta charset="utf-8">
        <style>
            body {{ font-family: Arial, sans-serif; margin: 40px; }}
            h1 {{ color: #333; }}
            code {{ background: #f4f4f4; padding: 2px 5px; }}
            pre {{ background: #f4f4f4; padding: 10px; }}
        </style>
    </head>
    <body>
        {html_content}
    </body>
    </html>
    """
    
    # Convert HTML to PDF
    HTML(string=full_html).write_pdf(pdf_file)
    print(f"Converted {md_file} to {pdf_file}")
def main():
    # Command line arguments
    if len(sys.argv) < 2:
        print("Markdown to PDF Converter")
        print("=" * 40)
        print("Usage:")
        print("  md2pdf <input.md> [output.pdf]")
        print("\nExamples:")
        print("  md2pdf document.md")
        print("  md2pdf document.md custom.pdf")
        print("  md2pdf *.md  (converts all markdown files)")
        sys.exit(1)
    
    input_file = sys.argv[1]
    output_file = sys.argv[2] if len(sys.argv) > 2 else None
    
    # Handle wildcard
    if '*' in input_file:
        import glob
        files = glob.glob(input_file)
        for file in files:
            if file.endswith('.md'):
                md_to_pdf(file)
    else:
        md_to_pdf(input_file, output_file)

if __name__ == "__main__":
    main()
